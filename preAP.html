<html>
<head>
	<style>
	*{padding: 0; margin:0;}
	canvas{ background: #eee; display: block; margin: 0 auto;}
	</style>
</head>

<body>
<canvas id= "myCanvas" width="800" height="600"></canvas>
<script type="text/javascript">
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");

var blockX = 1;
var blockY = 1;
var blockWidth = 50;
var blockHeight = 30;
var blockXSpeed = 2;
var blockYSpeed = 2;
var color = "rgb(0, 255, 0)";
var blocks = [];
var numBlocks = 100;
var pX = 400;
var pY = 300;
var pXspeed = 1;
var pYspeed = 1;


function Block(x1, y1, w1, h1, xS1, yS1, r1, g1, b1, numHits1)
{
	this.x = x1;
	this.y = y1;
	this.w = w1;
	this.h = h1;
	this.xS = xS1;
	this.yS = yS1;
	this.r = r1;
	this.g = g1;
	this.b = b1;
	this.numHits = numHits1;
}

for(var i = 0; i < numBlocks; i++)
{
	var x = Math.floor(Math.random() * 750) + 25;
	var y = Math.floor(Math.random() * 550) + 25;
	var w = Math.floor(Math.random() * 40) + 5;
	var h = Math.floor(Math.random() * 40) + 5;
	var xS = ((Math.random() * 60)*.1) - 3;
	while(xS == 0)
	{
		xS = ((Math.random() * 60)*.1) - 3;
	}
	var yS = ((Math.random() * 60)*.1) - 3;
	while(yS == 0)
	{
		yS = ((Math.random() * 60)*.1) - 3;
	}
	var r = Math.floor(Math.random() * 256);
	var g = Math.floor(Math.random() * 256);
	var b = Math.floor(Math.random() * 256);
	var numHits = 0;
	blocks[i] = new Block(x,y,w,h,xS,yS,r,g,b,numHits);
}

function drawBlock()
{
	for(var i = 0; i < numBlocks; i++)
	{
		color = "rgb(" + blocks[i].r + ", " + blocks[i].g + ", " + blocks[i].b + ")";
		ctx.fillStyle = color;
		ctx.fillRect(blocks[i].x, blocks[i].y, blocks[i].w, blocks[i].h);
		blocks[i].x += blocks[i].xS;
		blocks[i].y += blocks[i].yS;
		if(blocks[i].x <= 0 || blocks[i].x + blocks[i].w >=  800)
		{
			blocks[i].xS  = -1 * blocks[i].xS;
			///blocks[i].xS *= -1;
		}
		if(blocks[i].y <= 0 || blocks[i].y + blocks[i].h >=  600)
		{
			blocks[i].yS  = -1 * blocks[i].yS;
			///blocks[i].yS *= -1;
		}
		if(pX >= blocks[i].x && 
		pX <= blocks[i].x + blocks[i].w &&
		pY >= blocks[i].y &&
		pY <= blocks[i].y + blocks[i].h)
		{
			//a collision has happened
			console.log("A collision has happened.");
		}
	}
	
	//draw pixel
	ctx.fillStyle = "rgb(255,255,255)";
	ctx.fillRect(pX, pY, 1, 1);
}

function collision()
{
	if(pX <= 0 || pX + 1 >=  800)
	{
		pXspeed *= -1;
	}
	if(pY <= 0 || pY + 1 >=  600)
	{
		pYspeed *= -1;
	}
}

function draw()
{
	ctx.clearRect(0,0,800,600);
	ctx.fillStyle = "rgb(0,0,0)"
	ctx.fillRect(0,0,800,600);
	drawBlock();
	collision();
}

setInterval(draw, 2);

</script>
</body>
</html>
